{% extends "clerk/base.html" %}

{% block content %}

<div class="container mt-5">
    <h2 class="mb-4 text-primary fw-bold text-center">Clerk Document Workflow</h2>

    <!-- Pending Documents Section -->
    <div class="card shadow-sm mb-4 border-0 rounded">
        <div class="card-header bg-primary text-white fw-bold">Pending Verification</div>
        <div class="card-body p-4">
            <table class="table table-bordered table-hover text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Document ID</th>
                        <th>Title</th>
                        <th>Submitted By</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>DOC-101</td>
                        <td>Construction Plan</td>
                        <td>Engineer Alex</td>
                        <td><span class="badge bg-warning text-dark">Pending</span></td>
                        <td>
                            <button class="btn btn-info btn-sm">Verify</button>
                        </td>
                    </tr>
                    <tr>
                        <td>DOC-102</td>
                        <td>Structural Report</td>
                        <td>Engineer David</td>
                        <td><span class="badge bg-success">Approved</span></td>
                        <td>
                            <button class="btn btn-secondary btn-sm" disabled>Reviewed</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="card shadow-sm mb-4 border-0 rounded">
        <div class="card-header bg-danger text-white fw-bold">Submit to Admin</div>
        <div class="card-body p-4">
            <form>
                <div class="mb-3">
                    <label for="documentSelect" class="form-label fw-bold">Select Document</label>
                    <select class="form-select" id="documentSelect">
                        <option value="1">Construction Plan</option>
                        <option value="2">Structural Report</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="finalRemarks" class="form-label fw-bold">Final Remarks</label>
                    <textarea class="form-control" id="finalRemarks" rows="3" placeholder="Enter review comments..."></textarea>
                </div>
                <button type="submit" class="btn btn-danger">Submit to Admin</button>
            </form>
        </div>
    </div>
</div>


    <!-- Live Chat & Video Call Section -->
    <div class="card shadow-sm mb-4 border-0 rounded">
        <div class="card-header bg-success text-white fw-bold">Live Chat & Video Call</div>
        <div class="card-body p-4">
            <div class="chat-container border rounded p-3 bg-light">
                <div class="chat-message bg-white p-2 rounded shadow-sm mb-2">
                    <strong>John Doe (Public):</strong> Can you confirm the approval process for this document?
                </div>
                <div class="chat-message bg-primary text-white p-2 rounded shadow-sm mb-2 text-end">
                    <strong>You (Clerk):</strong> Yes, this document is under verification.
                </div>
            </div>
            <div class="mt-3">
                <textarea class="form-control" rows="2" placeholder="Type a message..."></textarea>
                <button class="btn btn-primary mt-2">Send</button>
            </div>
            <div class="mt-3 text-center">
                <button class="btn btn-success" onclick="startJitsiCall()">Start Video Call</button>
            </div>
            <div id="meet" class="mt-3"></div>
        </div>
    </div>

    <!-- Final Submission Section -->

<!-- Jitsi Meet Integration -->
<script src="https://meet.jit.si/external_api.js"></script>
<script>
    function startJitsiCall() {
        const domain = "meet.jit.si";
        const uniqueRoom = "PanchayathMeetingRoom-" + Date.now();

        const options = {
            roomName: uniqueRoom,
            width: "100%",
            height: 500,
            parentNode: document.getElementById("meet"),
            configOverwrite: {
                disableInviteFunctions: true,
                prejoinPageEnabled: false,
                requireDisplayName: false,
                enableWelcomePage: false,
                disableModeratorIndicator: true,
            },
            interfaceConfigOverwrite: { 
                filmStripOnly: false 
            }
        };
        new JitsiMeetExternalAPI(domain, options);
    }
</script>

<style>
    .container {
        max-width: 1000px;
    }
    .card {
        border-radius: 10px;
    }
    .btn {
        border-radius: 20px;
    }
    .chat-container {
        height: 300px;
        overflow-y: auto;
        background: #f8f9fa;
        padding: 10px;
        border-radius: 10px;
    }
    .chat-message {
        max-width: 80%;
        padding: 8px;
        border-radius: 10px;
    }
    .chat-message.text-end {
        background-color: #007bff;
        color: white;
    }
    #meet {
        height: 500px;
        border-radius: 10px;
    }
</style>

{% endblock content %}